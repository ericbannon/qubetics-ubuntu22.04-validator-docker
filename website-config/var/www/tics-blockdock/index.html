<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Opensource TICS Validator Ecosystem from Block Dock</title>
  <meta name="description" content="open, secure, and transparent.">
  <link rel="icon" href="/assets/favicon.png" type="image/png">
  <style>
    :root{
      --bg:#0b1120; --fg:#e5e7eb; --muted:#94a3b8;
      --card:rgba(15,23,42,.66); --border:rgba(148,163,184,.22);
      --accent:#8ab4ff; --btn:#334155; --btn-hover:#475569;
      --radius:18px; --side-margin:32px; /* small margins */
      --floating-offset: clamp(90px, 12vw, 160px);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--fg);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial;
      background: radial-gradient(1000px 600px at 20% 0%, #1f2937 0%, var(--bg) 40%, #0a0f1c 100%);
    }

    /* Leave room so content isn't under the floating stat boxes */
.container {
  margin: 0 var(--side-margin);
  padding: 28px;
  padding-top: 80px; /* much smaller */
}
    header{display:flex;align-items:center;justify-content:center;margin-top:8px}
    header img{width:140px;height:140px;border-radius:28px;box-shadow:0 20px 60px rgba(99,102,241,.25)}
    h1{font-size:clamp(28px,5vw,44px);margin:16px 0 6px;text-align:center}
    .tagline{color:var(--muted);text-align:center;margin:0 0 22px}

    .btn{
      display:inline-flex;align-items:center;justify-content:center;
      padding:.72rem 1rem;border-radius:12px;background:var(--btn);
      color:var(--fg);text-decoration:none;border:1px solid rgba(255,255,255,.08);
      transition:transform .06s ease, background .15s ease, box-shadow .2s ease;
      user-select:none;
    }
    .btn:hover{ background:var(--btn-hover); transform: translateY(-1px) }
    .btn.small{padding:.6rem .9rem;border-radius:10px}

    .subtle{color:var(--muted)}
    .divider{height:1px;background:linear-gradient(90deg,transparent,rgba(148,163,184,.22),transparent);margin:18px 0}
    footer{color:var(--muted);text-align:center;margin:28px 0 6px}

    .section{
      padding:24px;border-radius:20px;
      background: linear-gradient(180deg, rgba(99,102,241,.10), rgba(2,6,23,.88)), var(--card);
      border:1px solid var(--border); box-shadow:0 24px 60px rgba(99,102,241,.18);
    }

    /* Triple panel */
    .panel-triple{
      display:grid;
      grid-template-columns: repeat(3, minmax(340px, 1fr));
      gap: 48px;
      align-items:start;
    }
    @media (max-width: 1150px){ .panel-triple{ grid-template-columns:1fr; } }

    .kv{
      background: rgba(15,23,42,.5);
      border: 1px solid rgba(148,163,184,.18);
      border-radius: 14px; padding: 20px; line-height: 1.65;
    }
.kv pre {
  margin: 0;
  color: #ffffff;
  white-space: pre-wrap;
  word-break: break-word;
  font-family: "Fira Code", "JetBrains Mono", ui-monospace, SFMono-Regular,
               Menlo, Consolas, "Liberation Mono", monospace;
  font-size: 0.9rem;   /* cleaner, less blocky */
  line-height: 1.45;
}
    .h2-accent{ font-size:1.05rem; letter-spacing:.2px; color:var(--accent); margin:.2rem 0 .8rem; }

    .tool-grid{display:grid; gap:12px; grid-template-columns: repeat(auto-fit, minmax(220px,1fr));}
    .center{text-align:center}

    /* Floating stat boxes */
    .stats-box{
      position: fixed; top: 16px; right: 20px;
      background: var(--card); border: 1px solid var(--border);
      border-radius: 14px; padding: 12px 14px;
      font-size: 0.92rem; line-height: 1.35;
      max-width: 320px; min-width: 240px;
      box-shadow: 0 20px 60px rgba(99,102,241,.25); z-index: 1000;
    }
    .stats-box.left{
      left: 20px; right: auto;
      background:
        radial-gradient(140% 120% at 10% 0%,
          rgba(168,85,247,.18) 0%,
          rgba(236,72,153,.12) 30%,
          rgba(2,6,23,.92) 70%),
        var(--card);
      border: 1px solid rgba(236,72,153,.35);
      box-shadow:
        0 0 0 1px rgba(124,58,237,.25) inset,
        0 18px 50px rgba(236,72,153,.25);
    }
    .stats-box h3{ margin:0 0 6px; font-size:1rem; color:var(--accent) }
    .stats-box .row{ display:flex; justify-content:space-between; align-items:center; gap:10px; margin:3px 0; }
    .stats-box .label{ color: var(--muted); }

    .chip{
      display:inline-block; padding: 2px 8px; border-radius: 999px;
      font-size: .78rem; font-weight: 600; line-height: 1.6;
      border: 1px solid rgba(255,255,255,.1); background: rgba(255,255,255,.06);
    }
    .chip.ok   { color:#dcfce7; background:rgba(22,163,74,.18); border-color:rgba(22,163,74,.35) }
    .chip.warn { color:#fff7ed; background:rgba(245,158,11,.18); border-color:rgba(245,158,11,.35) }
    .chip.bad  { color:#fee2e2; background:rgba(239,68,68,.18); border-color:rgba(239,68,68,.35) }
    .chip.purp { color:#ede9fe; background:rgba(139,92,246,.22); border:1px solid rgba(139,92,246,.4) }
    .chip.pink { color:#ffe4f1; background:rgba(236,72,153,.22); border:1px solid rgba(236,72,153,.4) }
    .chip.dark { color:#e5e7eb; background:rgba(2,6,23,.35); border:1px solid rgba(148,163,184,.25) }

    @media (max-width: 640px){
      .stats-box, .stats-box.left{ position: static; margin:10px auto 0; }
      .container{ margin:0 12px; padding-top: 16px; }
    }
  </style>
</head>
<body>

  <!-- Floating staking snapshot (from /stats2.json) -->
  <div class="stats-box left" id="stake-stats">
    <h3>Stake & Delegations</h3>
    <div id="stake-body">Loadingâ€¦</div>
  </div>

  <!-- Floating node stats (from /stats.json) -->
  <div class="stats-box" id="live-stats">
    <h3>Node Stats</h3>
    <div id="stats-body">Loadingâ€¦</div>
  </div>

  <div class="container">
    <header>
      <img src="/assets/logo.png" alt="Block Dock Validator logo">
    </header>

    <h1>The Block Dock Validator</h1>
    <p class="tagline">Opensource â€¢ Transparent â€¢ Reproducible</p>

    <!-- Telegram -->
    <div style="margin:16px 0 28px;display:flex;justify-content:center;">
      <a href="https://t.me/blockdockvalidator" target="_blank" rel="noopener"
         style="display:inline-flex;align-items:center;gap:10px;background:#229ED9;color:white;padding:.7rem 1.2rem;border-radius:12px;text-decoration:none;font-weight:600;box-shadow:0 4px 12px rgba(0,0,0,.25);">
        <img src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg"
             alt="Telegram" style="height:22px;width:22px;">
        Join us on Telegram
      </a>
    </div>

    <!-- Triple panel: Validator Details | Source Code | Docker Images -->
<section class="section">
  <div class="panel-triple">

    <!-- Panel 1: Validator Details -->
    <div style="display:flex;flex-direction:column;justify-content:space-between;height:100%;">
      <div>
        <h2 class="h2-accent" style="text-align:center;">Validator Details</h2>
        <div class="kv">
<pre>Moniker: Block Dock Validator

Operator:
<span style="color:#ec4899;font-size:0.85rem;">
qubeticsvaloper18llj8eqh9k9mznylk8svrcc63ucf7y2r4xkd8l
</span></pre>
        </div>
        <p class="subtle" style="margin-top:.8rem;text-align:center;">
          Always confirm the operator address before delegating.
        </p>
      </div>
      <div style="display:flex;align-items:center;justify-content:center;gap:16px;margin-top:20px;">
        <a href="https://native.ticsscan.com/qubetics/staking/qubeticsvaloper18llj8eqh9k9mznylk8svrcc63ucf7y2r4xkd8l"
           target="_blank" rel="noopener"
           class="btn small" style="background:#1e293b">
          ðŸ”— View on Native TICSScan
        </a>
        <img src="/assets/qubetics.png" alt="Qubetics Logo"
             style="height:46px;width:auto;opacity:.95;filter:drop-shadow(0 3px 10px rgba(0,0,0,.45))">
      </div>
    </div>

    <!-- Panel 2: Source Code -->
    <div style="display:flex;flex-direction:column;justify-content:space-between;height:100%;">
      <div>
        <h2 class="h2-accent" style="text-align:center;">Source Code</h2>
        <div class="kv" style="padding:16px;font-size:0.95rem;line-height:1.5;">
          <p style="margin:0;text-align:center;">
            Open source contribution is the backbone of the TICS community.
            Sharing configurations, scripts, and research openly ensures
            transparency, reproducibility, and resilience across the ecosystem.
            Every contribution strengthens decentralization and builds trust.
          </p>
        </div>
        <div class="divider"></div>
        <p style="text-align:center;">
          <a href="mailto:admin@tics-blockdock.io" style="color:#cbd5e1;">admin@tics-blockdock.io</a>
        </p>
      </div>
      <div style="display:flex;align-items:center;justify-content:center;gap:16px;margin-top:20px;">
        <a class="btn" href="https://github.com/ericbannon/qubetics-ubuntu22.04-validator-docker"
           target="_blank" rel="noopener">View on GitHub</a>
        <img src="/assets/github-purple.png" alt="GitHub"
             style="height:46px;width:46px;opacity:.95;filter:drop-shadow(0 3px 10px rgba(0,0,0,.45))">
      </div>
    </div>

    <!-- Panel 3: Docker Images -->
    <div style="display:flex;flex-direction:column;justify-content:space-between;height:100%;">
      <div>
        <h2 class="h2-accent" style="text-align:center;">Docker Images</h2>
        <div class="kv" style="padding:16px;font-size:0.95rem;line-height:1.5;">
          <p style="margin:0;text-align:center;">
            Maintained Docker images give validators a reliable way to test
            and upgrade in consistent environments. Containerized releases
            reduce downtime, simplify rollbacks, and improve reliability by
            making every upgrade path reproducible and safe.
          </p>
        </div>
      </div>
      <div style="display:flex;align-items:center;justify-content:center;gap:16px;margin-top:20px;">
        <a class="btn" href="https://hub.docker.com/r/bannimal/tics-validator-node/tags"
           target="_blank" rel="noopener">View on DockerHub</a>
        <img src="https://www.docker.com/wp-content/uploads/2022/03/vertical-logo-monochromatic.png"
             alt="Docker Logo"
             style="height:46px;width:auto;opacity:.95;filter:drop-shadow(0 3px 10px rgba(0,0,0,.45))">
      </div>
    </div>

  </div>
</section>
    <!-- Tooling & Docs -->
    <section class="section" style="margin-top:20px;">
      <h2 class="h2-accent center">Utilities & Scripts</h2>
      <p class="subtle center" style="margin:0 0 14px">Quick links to the most useful subâ€‘repos and scripts:</p>
      <div class="tool-grid">
        <a class="btn small" href="https://github.com/ericbannon/qubetics-ubuntu22.04-validator-docker/tree/main/host-utilities" target="_blank" rel="noopener">Useful Host Utilities</a>
        <a class="btn small" href="https://github.com/ericbannon/qubetics-ubuntu22.04-validator-docker/tree/main/systemd_services" target="_blank" rel="noopener">Docker Systemd Services</a>
        <a class="btn small" href="https://github.com/ericbannon/qubetics-ubuntu22.04-validator-docker/tree/main/docker-optimized-configs" target="_blank" rel="noopener">Docker Optimized TOMLs</a>
        <a class="btn small" href="https://github.com/ericbannon/qubetics-ubuntu22.04-validator-docker/tree/main/telegram-bot" target="_blank" rel="noopener">Telegram Bot Scripts</a>
        <a class="btn small" href="https://github.com/ericbannon/qubetics-ubuntu22.04-validator-docker/tree/main/p2p-stability" target="_blank" rel="noopener">P2P Stability Scripts</a>
      </div>
    </section>

    <footer>Â© 2025 Bannon TICS Validator â€¢ This site is openâ€‘source.</footer>
  </div>

  <!-- Live JSON updaters -->
  <script>
  function chip(value, unit, thresholds){
    if(value==null || isNaN(value)) return '<span class="chip">â€”</span>';
    const v = Number(value);
    let cls = 'ok';
    if(v >= thresholds.bad) cls = 'bad';
    else if(v >= thresholds.warn) cls = 'warn';
    return `<span class="chip ${cls}">${v}${unit}</span>`;
  }

  async function loadStats(){
    const el = document.getElementById('stats-body');
    try{
      el.textContent = 'Updatingâ€¦';
      const res = await fetch('/stats.json', { cache: 'no-store' });
      if(!res.ok) throw new Error('HTTP ' + res.status);
      const s = await res.json();
      const fmt = n => (typeof n === 'number' && n.toLocaleString) ? n.toLocaleString() : (n ?? '');
      const sys = s?.cpu?.system_pct ?? null;
      const proc = s?.cpu?.process_pct ?? null;
      const rssMiB = (s?.cpu?.process_rss_bytes!=null) ? Math.round(s.cpu.process_rss_bytes/1024/1024) : null;
      const sysChip  = chip(sys,  '%', { warn:60, bad:85 });
      const procChip = chip(proc, '%', { warn:60, bad:85 });

      el.innerHTML = `
        <div class="row"><span class="label">Block</span> <span>${fmt(s.latest_block_height)}</span></div>
        <div class="row"><span class="label">Peers</span> <span>${fmt(s.peers?.total_now)} (in ${fmt(s.peers?.inbound_now)}, out ${fmt(s.peers?.outbound_now)})</span></div>
        <div class="row"><span class="label">CPU (system)</span> <span>${sysChip}</span></div>
        <div class="row"><span class="label">CPU (proc)</span> <span>${procChip}</span></div>
        <div class="row"><span class="label">Mem (proc)</span> <span>${rssMiB!=null ? rssMiB+' MiB' : 'â€”'}</span></div>
        <div class="row"><span class="label">Load (1m)</span> <span>${fmt(s.cpu?.loadavg_1m)}</span></div>
        <div class="row" style="margin-top:6px;font-size:.8rem;color:var(--muted)">
          Updated: ${new Date(s.generated_at).toLocaleTimeString?.() || s.generated_at}
        </div>`;
    }catch(e){
      el.textContent = 'Unavailable';
      console.error('stats.json error:', e);
    }
  }

  async function loadStakeStats(){
    const el = document.getElementById('stake-body');
    try{
      el.textContent = 'Updatingâ€¦';
      const res = await fetch('/stats2.json', { cache: 'no-store' });
      if(!res.ok) throw new Error('HTTP ' + res.status);
      const s = await res.json();
      const fmt = n => (typeof n === 'number' && n.toLocaleString) ? n.toLocaleString() : (n ?? '');
      const stakeChip = v => `<span class="chip purp">${v} TICS</span>`;
      const selfChip  = v => `<span class="chip pink">${v} TICS</span>`;
      const delChip   = v => `<span class="chip dark">${fmt(v)}</span>`;

      el.innerHTML = `
        <div class="row"><span class="label">Total Stake</span> <span>${stakeChip(s.total_stake_tics ?? 'â€”')}</span></div>
        <div class="row"><span class="label">Self-Delegated</span> <span>${selfChip(s.self_delegated_tics ?? 'â€”')}</span></div>
        <div class="row"><span class="label">Delegators</span> <span>${delChip(s.delegators_count ?? 'â€”')}</span></div>
        <div class="row" style="margin-top:6px;font-size:.8rem;color:var(--muted)">
          Updated: ${new Date(s.generated_at).toLocaleTimeString?.() || s.generated_at}
        </div>`;
    }catch(e){
      el.textContent = 'Unavailable';
      console.error('stats2.json error:', e);
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    loadStats(); loadStakeStats();
    setInterval(loadStats, 20000);
    setInterval(loadStakeStats, 20000);
  });
  </script>
</body>
</html>
